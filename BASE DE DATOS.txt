CREATE TABLE IF NOT EXISTS public.HOSPITAL
(
	ID SERIAL,
	NOMBRE VARCHAR(50) NOT NULL,
	LOCALIDAD VARCHAR(50),
	CONSTRAINT PK_HOSPITAL PRIMARY KEY (ID),
	CONSTRAINT UK_HOSPITAL_NOMBRE UNIQUE (NOMBRE)
);

CREATE TABLE IF NOT EXISTS public.MEDICO
(
	ID SERIAL,
	NOMBRE VARCHAR(50) NOT NULL,
	APELLIDOS VARCHAR(50) NOT NULL,
	ID_HOSPITAL INTEGER NOT NULL,
	CONSTRAINT PK_MEDICO PRIMARY KEY (ID),
	CONSTRAINT FK_MEDICO_HOSPITAL FOREIGN KEY (ID_HOSPITAL)
		REFERENCES HOSPITAL (ID) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS public.PACIENTE
(
	ID SERIAL,
	NOMBRE VARCHAR(50) NOT NULL,
	APELLIDOS VARCHAR(50) NOT NULL,
	PUEBLO_RESIDENCIA VARCHAR(50),
	CONSTRAINT PK_PACIENTE PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS public.VISITA
(
	ID SERIAL,
	ID_PACIENTE INTEGER NOT NULL,
	ID_MEDICO INTEGER NOT NULL,
	FECHA DATE NOT NULL,
	CONSTRAINT PK_VISITA PRIMARY KEY (ID),
	CONSTRAINT FK_VISITA_PACIENTE FOREIGN KEY (ID_PACIENTE)
		REFERENCES PACIENTE (ID) ON DELETE CASCADE,
	CONSTRAINT FK_VISITA_MEDICO FOREIGN KEY (ID_MEDICO)
		REFERENCES MEDICO (ID) ON DELETE CASCADE
);